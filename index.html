<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ±Ù… Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ø±Ù‚Ú©Ø§Ø±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <!-- jsPDF + html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: 'Tahoma', 'Vazir', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
            color: #1e293b;
        }
        .container {
            max-width: 960px;
            margin: 1.5rem auto;
            padding: 1rem;
        }
        .card {
            background: white;
            border-radius: 1.5rem;
            padding: 1.8rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }
        h1 {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            color: #1e40af;
            margin-bottom: 2rem;
        }
        h2 {
            font-size: 1.4rem;
            color: #1e40af;
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 0.5rem;
            margin-bottom: 1.2rem;
        }
        label {
            font-weight: 600;
            color: #475569;
            font-size: 0.95rem;
            margin-bottom: 0.4rem;
            display: block;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 0.65rem 0.9rem;
            border: 1.5px solid #cbd5e1;
            border-radius: 0.75rem;
            background: #f8fafc;
            font-size: 0.95rem;
            transition: all 0.2s;
        }
        input:focus, textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59,130,246,0.15);
        }
        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 0.4rem;
        }
        .radio-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: #eff6ff;
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .radio-item:hover {
            background: #dbeafe;
        }
        button {
            background: #3b82f6;
            color: white;
            padding: 0.75rem 1.8rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(59,130,246,0.3);
            transition: all 0.3s;
        }
        button:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 0.5rem;
        }
        th {
            background: #dbeafe;
            padding: 0.75rem;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
        }
        td {
            background: #f8fafc;
            padding: 0.75rem;
            border-radius: 0.75rem;
        }
        .history-item {
            background: #f8fafc;
            padding: 1rem;
            border-radius: 0.75rem;
            border-right: 4px solid #3b82f6;
            font-size: 0.95rem;
            transition: all 0.2s;
        }
        .history-item:hover {
            background: #eff6ff;
        }
        .alert {
            background: #fef2f2;
            color: #991b1b;
            padding: 0.75rem;
            border-radius: 0.75rem;
            font-size: 0.9rem;
            font-weight: 600;
            border: 1px solid #fecaca;
        }
        @media (max-width: 768px) {
            .container { padding: 0.75rem; margin: 1rem auto; }
            .card { padding: 1.2rem; }
            h1 { font-size: 1.75rem; }
            h2 { font-size: 1.3rem; }
            .radio-group { gap: 0.6rem; }
            .radio-item { padding: 0.4rem 0.8rem; font-size: 0.85rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ÙØ±Ù… Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ø±Ù‚Ú©Ø§Ø±</h1>

        <form id="evaluation-form" class="card">
            <!-- Ø¨Ø®Ø´ Û± -->
            <div>
                <h2>Ø¨Ø®Ø´ Û± | Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div>
                        <label>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø¨Ø±Ù‚Ú©Ø§Ø±</label>
                        <input type="text" id="electrician_name" required>
                    </div>
                    <div>
                        <label>Ú©Ø¯ Ø¹Ø¶ÙˆÛŒØª / Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
                        <input type="text" id="membership_code">
                    </div>
                    <div class="md:col-span-2">
                        <label>Ù†Ø´Ø§Ù†ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ÙˆØ±Ø¯ Ø¨Ø§Ø²Ø¯ÛŒØ¯</label>
                        <input type="text" id="project_address">
                    </div>
                    <div>
                        <label>Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="project_type" value="Ù…Ø³Ú©ÙˆÙ†ÛŒ"><span>Ù…Ø³Ú©ÙˆÙ†ÛŒ</span></div>
                            <div class="radio-item"><input type="radio" name="project_type" value="ØªØ¬Ø§Ø±ÛŒ"><span>ØªØ¬Ø§Ø±ÛŒ</span></div>
                            <div class="radio-item"><input type="radio" name="project_type" value="Ø§Ø¯Ø§Ø±ÛŒ"><span>Ø§Ø¯Ø§Ø±ÛŒ</span></div>
                            <div class="radio-item"><input type="radio" name="project_type" value="ØµÙ†Ø¹ØªÛŒ Ø³Ø¨Ú©"><span>ØµÙ†Ø¹ØªÛŒ Ø³Ø¨Ú©</span></div>
                        </div>
                    </div>
                    <div>
                        <label>ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="project_status" value="Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§"><span>Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§</span></div>
                            <div class="radio-item"><input type="radio" name="project_status" value="ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡"><span>ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡ (Ø­Ø¯Ø§Ú©Ø«Ø± Û¶ Ù…Ø§Ù‡ Ú¯Ø°Ø´ØªÙ‡)</span></div>
                        </div>
                    </div>
                    <div class="md:col-span-2">
                        <label>ØªØ§Ø±ÛŒØ® Ø¨Ø§Ø²Ø¯ÛŒØ¯</label>
                        <input type="text" id="visit_date" placeholder="Û±Û´Û°Û´/Û°Û¹/Û²Û´">
                    </div>
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Û² -->
            <div class="mt-10">
                <h2>Ø¨Ø®Ø´ Û² | Ù…Ø´Ø®ØµØ§Øª Ø§Ø±Ø²ÛŒØ§Ø¨Ø§Ù†</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div><label>Ù†Ø§Ù… Ø§Ø±Ø²ÛŒØ§Ø¨ Ø§ÙˆÙ„</label><input type="text" id="evaluator1_name" required></div>
                    <div><label>Ø§Ù…Ø¶Ø§ Ø§Ø±Ø²ÛŒØ§Ø¨ Ø§ÙˆÙ„</label><input type="text" id="evaluator1_sign"></div>
                    <div><label>Ù†Ø§Ù… Ø§Ø±Ø²ÛŒØ§Ø¨ Ø¯ÙˆÙ…</label><input type="text" id="evaluator2_name" required></div>
                    <div><label>Ø§Ù…Ø¶Ø§ Ø§Ø±Ø²ÛŒØ§Ø¨ Ø¯ÙˆÙ…</label><input type="text" id="evaluator2_sign"></div>
                </div>
                <div class="alert mt-4">â›” Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ø§ÛŒØ¯ Ø­ØªÙ…Ø§Ù‹ ØªÙˆØ³Ø· Ø¯Ùˆ Ù†ÙØ± Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯.</div>
            </div>

            <!-- Ø¨Ø®Ø´ Û³ -->
            <div class="mt-10">
                <h2>Ø¨Ø®Ø´ Û³ | Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ ÙÙ†ÛŒ Ùˆ Ø§Ø¬Ø±Ø§ÛŒÛŒ (Û³Û° Ø§Ù…ØªÛŒØ§Ø²)</h2>
                <table>
                    <thead>
                        <tr><th>Ø±Ø¯ÛŒÙ</th><th>Ø´Ø§Ø®Øµ</th><th colspan="6">Ø§Ù…ØªÛŒØ§Ø² (Û° ØªØ§ Ûµ)</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Û±</td><td>Ø±Ø¹Ø§ÛŒØª Ø§ØµÙˆÙ„ Ø³ÛŒÙ…â€ŒÚ©Ø´ÛŒ</td><td class="radio-group">
                            <div class="radio-item"><input type="radio" name="tech1" value="0">Û°</div>
                            <div class="radio-item"><input type="radio" name="tech1" value="1">Û±</div>
                            <div class="radio-item"><input type="radio" name="tech1" value="2">Û²</div>
                            <div class="radio-item"><input type="radio" name="tech1" value="3">Û³</div>
                            <div class="radio-item"><input type="radio" name="tech1" value="4">Û´</div>
                            <div class="radio-item"><input type="radio" name="tech1" value="5">Ûµ</div>
                        </td></tr>
                        <tr><td>Û²</td><td>Ú©ÛŒÙÛŒØª ØªØ§Ø¨Ù„Ùˆ Ø¨Ø±Ù‚</td><td class="radio-group">
                            <div class="radio-item"><input type="radio" name="tech2" value="0">Û°</div>
                            <div class="radio-item"><input type="radio" name="tech2" value="1">Û±</div>
                            <div class="radio-item"><input type="radio" name="tech2" value="2">Û²</div>
                            <div class="radio-item"><input type="radio" name="tech2" value="3">Û³</div>
                            <div class="radio-item"><input type="radio" name="tech2" value="4">Û´</div>
                            <div class="radio-item"><input type="radio" name="tech2" value="5">Ûµ</div>
                        </td></tr>
                        <tr><td>Û³</td><td>Ø§ÛŒÙ…Ù†ÛŒ Ø§Ø¬Ø±Ø§ (Ø§ØªØµØ§Ù„Ø§ØªØŒ Ø§Ø±ØªØŒ Ø­ÙØ§Ø¸Øª)</td><td class="radio-group">
                            <div class="radio-item"><input type="radio" name="tech3" value="0">Û°</div>
                            <div class="radio-item"><input type="radio" name="tech3" value="1">Û±</div>
                            <div class="radio-item"><input type="radio" name="tech3" value="2">Û²</div>
                            <div class="radio-item"><input type="radio" name="tech3" value="3">Û³</div>
                            <div class="radio-item"><input type="radio" name="tech3" value="4">Û´</div>
                            <div class="radio-item"><input type="radio" name="tech3" value="5">Ûµ</div>
                        </td></tr>
                        <tr><td>Û´</td><td>Ù†Ø¸Ù…ØŒ ØªÙ…ÛŒØ²ÛŒ Ùˆ Ø²ÛŒØ¨Ø§ÛŒÛŒ Ú©Ø§Ø±</td><td class="radio-group">
                            <div class="radio-item"><input type="radio" name="tech4" value="0">Û°</div>
                            <div class="radio-item"><input type="radio" name="tech4" value="1">Û±</div>
                            <div class="radio-item"><input type="radio" name="tech4" value="2">Û²</div>
                            <div class="radio-item"><input type="radio" name="tech4" value="3">Û³</div>
                            <div class="radio-item"><input type="radio" name="tech4" value="4">Û´</div>
                            <div class="radio-item"><input type="radio" name="tech4" value="5">Ûµ</div>
                        </td></tr>
                        <tr><td>Ûµ</td><td>Ø±Ø¹Ø§ÛŒØª Ø­Ø¯Ø§Ù‚Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø¨Ø­Ø« Û±Û³</td><td class="radio-group">
                            <div class="radio-item"><input type="radio" name="tech5" value="0">Û°</div>
                            <div class="radio-item"><input type="radio" name="tech5" value="1">Û±</div>
                            <div class="radio-item"><input type="radio" name="tech5" value="2">Û²</div>
                            <div class="radio-item"><input type="radio" name="tech5" value="3">Û³</div>
                            <div class="radio-item"><input type="radio" name="tech5" value="4">Û´</div>
                            <div class="radio-item"><input type="radio" name="tech5" value="5">Ûµ</div>
                        </td></tr>
                    </tbody>
                </table>
                <div class="mt-5">
                    <label>Ø¬Ù…Ø¹ Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ø¨Ø®Ø´ (Ø§Ø² Û³Û°)</label>
                    <input type="text" id="section3_total">
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Û´ -->
            <div class="mt-10">
                <h2>Ø¨Ø®Ø´ Û´ | Ø±Ø¹Ø§ÛŒØª Ù†Ø±Ø®Ù†Ø§Ù…Ù‡ Ùˆ Ø§ØµÙˆÙ„ ØµÙ†ÙÛŒ (Û²Û° Ø§Ù…ØªÛŒØ§Ø²)</h2>
                <table>
                    <thead>
                        <tr><th>Ø±Ø¯ÛŒÙ</th><th>Ù…ÙˆØ±Ø¯ Ø¨Ø±Ø±Ø³ÛŒ</th><th>ÙˆØ¶Ø¹ÛŒØª</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Û±</td><td>Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ ÛŒØ§ ØªÙˆØ§ÙÙ‚ Ù…Ø´Ø®Øµ Ø¯Ø§Ø±Ø¯</td><td class="radio-group"><div class="radio-item"><input type="radio" name="rule1" value="Ø¨Ù„Ù‡">Ø¨Ù„Ù‡</div><div class="radio-item"><input type="radio" name="rule1" value="Ø®ÛŒØ±">Ø®ÛŒØ±</div></td></tr>
                        <tr><td>Û²</td><td>Ù‚ÛŒÙ…Øª Ù…Ø·Ø§Ø¨Ù‚ Ù†Ø±Ø®Ù†Ø§Ù…Ù‡ Ú©Ù…ÛŒØªÙ‡</td><td class="radio-group"><div class="radio-item"><input type="radio" name="rule2" value="Ø¨Ù„Ù‡">Ø¨Ù„Ù‡</div><div class="radio-item"><input type="radio" name="rule2" value="Ø®ÛŒØ±">Ø®ÛŒØ±</div></td></tr>
                        <tr><td>Û³</td><td>Ø¹Ø¯Ù… Ù‚ÛŒÙ…Øªâ€ŒØ´Ú©Ù†ÛŒ</td><td class="radio-group"><div class="radio-item"><input type="radio" name="rule3" value="Ø¨Ù„Ù‡">Ø¨Ù„Ù‡</div><div class="radio-item"><input type="radio" name="rule3" value="Ø®ÛŒØ±">Ø®ÛŒØ±</div></td></tr>
                        <tr><td>Û´</td><td>Ø´Ú©Ø§ÛŒØª Ù…Ø§Ù„ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ Ù†Ø¯Ø§Ø±Ø¯</td><td class="radio-group"><div class="radio-item"><input type="radio" name="rule4" value="Ø¨Ù„Ù‡">Ø¨Ù„Ù‡</div><div class="radio-item"><input type="radio" name="rule4" value="Ø®ÛŒØ±">Ø®ÛŒØ±</div></td></tr>
                    </tbody>
                </table>
                <div class="mt-5">
                    <label>Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ø¨Ø®Ø´ (Û° ØªØ§ Û²Û°)</label>
                    <input type="text" id="section4_total">
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Ûµ -->
            <div class="mt-10">
                <h2>Ø¨Ø®Ø´ Ûµ | Ù†Ù…ÙˆÙ†Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡ Ùˆ Ú©ÛŒÙÛŒØª Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø§Ø®ÛŒØ± (Û±Ûµ Ø§Ù…ØªÛŒØ§Ø²)</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
                    <div>
                        <label>Ú©ÛŒÙÛŒØª Ú©Ù„ÛŒ Ø§Ø¬Ø±Ø§</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="quality" value="Ø¶Ø¹ÛŒÙ">Ø¶Ø¹ÛŒÙ</div>
                            <div class="radio-item"><input type="radio" name="quality" value="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</div>
                            <div class="radio-item"><input type="radio" name="quality" value="Ø®ÙˆØ¨">Ø®ÙˆØ¨</div>
                            <div class="radio-item"><input type="radio" name="quality" value="Ø¹Ø§Ù„ÛŒ">Ø¹Ø§Ù„ÛŒ</div>
                        </div>
                    </div>
                    <div>
                        <label>Ø±Ø¶Ø§ÛŒØª Ú©Ø§Ø±ÙØ±Ù…Ø§</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="satisfaction" value="Ø¶Ø¹ÛŒÙ">Ø¶Ø¹ÛŒÙ</div>
                            <div class="radio-item"><input type="radio" name="satisfaction" value="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</div>
                            <div class="radio-item"><input type="radio" name="satisfaction" value="Ø®ÙˆØ¨">Ø®ÙˆØ¨</div>
                        </div>
                    </div>
                    <div>
                        <label>Ù…Ø³ØªÙ†Ø¯Ø§Øª (Ø¹Ú©Ø³ / ØªÙˆØ¶ÛŒØ­)</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="docs" value="Ø¯Ø§Ø±Ø¯">Ø¯Ø§Ø±Ø¯</div>
                            <div class="radio-item"><input type="radio" name="docs" value="Ù†Ø¯Ø§Ø±Ø¯">Ù†Ø¯Ø§Ø±Ø¯</div>
                        </div>
                    </div>
                </div>
                <div class="mt-5">
                    <label>Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ø¨Ø®Ø´ (Û° ØªØ§ Û±Ûµ)</label>
                    <input type="text" id="section5_total">
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Û¶ -->
            <div class="mt-10">
                <h2>Ø¨Ø®Ø´ Û¶ | Ø³Ø§Ø¨Ù‚Ù‡ Ùˆ ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±ÛŒ (Û²Û° Ø§Ù…ØªÛŒØ§Ø²)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div>
                        <label>Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø±ÛŒ Ø§Ø¹Ù„Ø§Ù…â€ŒØ´Ø¯Ù‡ (Ø³Ø§Ù„)</label>
                        <input type="text" id="experience_years">
                    </div>
                    <div>
                        <label>Ø³Ø·Ø­ ØªØ¬Ø±Ø¨Ù‡</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="exp_level" value="Ú©Ù…ØªØ± Ø§Ø² Ûµ Ø³Ø§Ù„">Ú©Ù…ØªØ± Ø§Ø² Ûµ Ø³Ø§Ù„</div>
                            <div class="radio-item"><input type="radio" name="exp_level" value="Ûµ ØªØ§ Û±Û° Ø³Ø§Ù„">Ûµ ØªØ§ Û±Û° Ø³Ø§Ù„</div>
                            <div class="radio-item"><input type="radio" name="exp_level" value="Û±Û° ØªØ§ Û²Û° Ø³Ø§Ù„">Û±Û° ØªØ§ Û²Û° Ø³Ø§Ù„</div>
                            <div class="radio-item"><input type="radio" name="exp_level" value="Ø¨ÛŒØ´ Ø§Ø² Û²Û° Ø³Ø§Ù„">Ø¨ÛŒØ´ Ø§Ø² Û²Û° Ø³Ø§Ù„</div>
                        </div>
                    </div>
                </div>
                <div class="mt-5">
                    <label>Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ø¨Ø®Ø´ (Û° ØªØ§ Û²Û°)</label>
                    <input type="text" id="section6_total">
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Û· -->
            <div class="mt-10">
                <h2>Ø¨Ø®Ø´ Û· | Ø§Ø¹ØªØ¨Ø§Ø± Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ùˆ Ù‡Ù…Ú©Ø§Ø±ÛŒ ØµÙ†ÙÛŒ (Û±Ûµ Ø§Ù…ØªÛŒØ§Ø²)</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
                    <div>
                        <label>Ø®ÙˆØ´â€ŒÙ‚ÙˆÙ„ÛŒ Ùˆ ØªØ¹Ù‡Ø¯ Ú©Ø§Ø±ÛŒ</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="commitment" value="Ø¶Ø¹ÛŒÙ">Ø¶Ø¹ÛŒÙ</div>
                            <div class="radio-item"><input type="radio" name="commitment" value="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</div>
                            <div class="radio-item"><input type="radio" name="commitment" value="Ø®ÙˆØ¨">Ø®ÙˆØ¨</div>
                        </div>
                    </div>
                    <div>
                        <label>Ù‡Ù…Ú©Ø§Ø±ÛŒ Ø¨Ø§ Ú©Ù…ÛŒØªÙ‡</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="cooperation" value="Ø¶Ø¹ÛŒÙ">Ø¶Ø¹ÛŒÙ</div>
                            <div class="radio-item"><input type="radio" name="cooperation" value="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</div>
                            <div class="radio-item"><input type="radio" name="cooperation" value="Ø®ÙˆØ¨">Ø®ÙˆØ¨</div>
                        </div>
                    </div>
                    <div>
                        <label>Ø±ÙØªØ§Ø± Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¯Ø± Ú©Ø§Ø±Ú¯Ø§Ù‡</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="behavior" value="Ø¶Ø¹ÛŒÙ">Ø¶Ø¹ÛŒÙ</div>
                            <div class="radio-item"><input type="radio" name="behavior" value="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</div>
                            <div class="radio-item"><input type="radio" name="behavior" value="Ø®ÙˆØ¨">Ø®ÙˆØ¨</div>
                        </div>
                    </div>
                </div>
                <div class="mt-5">
                    <label>Ø³Ø§Ø¨Ù‚Ù‡ Ø´Ú©Ø§ÛŒØª</label>
                    <div class="radio-group">
                        <div class="radio-item"><input type="radio" name="complaint" value="Ø¯Ø§Ø±Ø¯">Ø¯Ø§Ø±Ø¯</div>
                        <div class="radio-item"><input type="radio" name="complaint" value="Ù†Ø¯Ø§Ø±Ø¯">Ù†Ø¯Ø§Ø±Ø¯</div>
                    </div>
                </div>
                <div class="mt-5">
                    <label>Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ø¨Ø®Ø´ (Û° ØªØ§ Û±Ûµ)</label>
                    <input type="text" id="section7_total">
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Û¸ -->
            <div class="mt-10">
                <h2>Ø¨Ø®Ø´ Û¸ | Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ù†Ù‡Ø§ÛŒÛŒ</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div>
                        <label>Ø¬Ù…Ø¹ Ú©Ù„ Ø§Ù…ØªÛŒØ§Ø²Ø§Øª (Ø§Ø² Û±Û°Û°)</label>
                        <input type="text" id="total_score">
                    </div>
                    <div>
                        <label>Ø±ØªØ¨Ù‡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</label>
                        <div class="radio-group">
                            <div class="radio-item"><input type="radio" name="rank" value="A">A</div>
                            <div class="radio-item"><input type="radio" name="rank" value="B">B</div>
                            <div class="radio-item"><input type="radio" name="rank" value="C">C</div>
                        </div>
                    </div>
                </div>
                <div class="mt-5">
                    <label>Ù†Ø¸Ø± ØªÚ©Ù…ÛŒÙ„ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨Ø§Ù†</label>
                    <textarea rows="4" id="comments"></textarea>
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Û¹ -->
            <div class="mt-10">
                <h2>Ø¨Ø®Ø´ Û¹ | ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ</h2>
                <p class="mb-4 text-gray-700">Ø§ÛŒÙ†Ø¬Ø§Ù†Ø¨ ØµØ­Øª Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ù…ÛŒØ¯Ø§Ù†ÛŒ Ùˆ Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ ÙÙˆÙ‚ Ø±Ø§ ØªØ£ÛŒÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ù….</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div><label>Ø§Ù…Ø¶Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ Ø§ÙˆÙ„</label><input type="text" id="final_sign1"></div>
                    <div><label>Ø§Ù…Ø¶Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ Ø¯ÙˆÙ…</label><input type="text" id="final_sign2"></div>
                </div>
            </div>

            <div class="text-center mt-12 space-x-6">
                <button type="button" id="save-btn">Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± ØªØ§Ø±ÛŒØ®Ú†Ù‡</button>
                <button type="button" id="pdf-btn">Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF</button>
            </div>
        </form>

        <!-- ØªØ§Ø±ÛŒØ®Ú†Ù‡ -->
        <div class="card">
            <h2>ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒâ€ŒÙ‡Ø§</h2>
            <div id="loading" class="text-center py-6 text-blue-600 font-medium">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
            <div id="history-list" class="space-y-3"></div>
        </div>
    </div>

    <script>
        // ==== ÙÙ‚Ø· Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ø±Ø§ Ø¨Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Firebase Ø®ÙˆØ¯Øª Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù† ====
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "your-project.firebaseapp.com",
            projectId: "your-project",
            storageBucket: "your-project.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcdef123456"
        };
        // ===================================================================

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const evaluationsRef = db.collection("evaluations");

        function loadHistory() {
            document.getElementById('loading').style.display = 'block';
            evaluationsRef.orderBy("timestamp", "desc").limit(30).get().then((snapshot) => {
                const list = document.getElementById('history-list');
                list.innerHTML = '';
                if (snapshot.empty) {
                    list.innerHTML = '<p class="text-center text-gray-500 py-6">Ù‡Ù†ÙˆØ² Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒâ€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>';
                }
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const div = document.createElement('div');
                    div.className = 'history-item';
                    div.innerHTML = `
                        <strong>${data.timestamp || 'â€”'}</strong><br>
                        Ø¨Ø±Ù‚Ú©Ø§Ø±: <strong>${data.electrician_name || 'â€”'}</strong> 
                        | Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„: <strong>${data.total_score || 'â€”'}</strong>
                        | Ø±ØªØ¨Ù‡: <strong>${data.rank || 'â€”'}</strong>
                    `;
                    list.appendChild(div);
                });
                document.getElementById('loading').style.display = 'none';
            }).catch(err => {
                console.error(err);
                alert("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªØ§Ø±ÛŒØ®Ú†Ù‡");
            });
        }

        document.getElementById('save-btn').addEventListener('click', () => {
            const data = {
                electrician_name: document.getElementById('electrician_name').value || '',
                membership_code: document.getElementById('membership_code').value || '',
                project_address: document.getElementById('project_address').value || '',
                project_type: document.querySelector('input[name="project_type"]:checked')?.value || '',
                project_status: document.querySelector('input[name="project_status"]:checked')?.value || '',
                visit_date: document.getElementById('visit_date').value || '',
                evaluator1_name: document.getElementById('evaluator1_name').value || '',
                evaluator2_name: document.getElementById('evaluator2_name').value || '',
                section3_total: document.getElementById('section3_total').value || '',
                section4_total: document.getElementById('section4_total').value || '',
                section5_total: document.getElementById('section5_total').value || '',
                section6_total: document.getElementById('section6_total').value || '',
                section7_total: document.getElementById('section7_total').value || '',
                total_score: document.getElementById('total_score').value || '',
                rank: document.querySelector('input[name="rank"]:checked')?.value || '',
                comments: document.getElementById('comments').value || '',
                timestamp: new Date().toLocaleString('fa-IR')
            };

            evaluationsRef.add(data).then(() => {
                alert('Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯ ğŸ’™');
                loadHistory();
                document.getElementById('evaluation-form').reset();
            }).catch(err => {
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡: ' + err.message);
            });
        });

        document.getElementById('pdf-btn').addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            html2canvas(document.querySelector('.container'), {scale: 2}).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const width = pdf.internal.pageSize.getWidth();
                const height = (canvas.height * width) / canvas.width;
                pdf.addImage(imgData, 'PNG', 0, 0, width, height);
                pdf.save('Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ_Ø¨Ø±Ù‚Ú©Ø§Ø±_' + new Date().toLocaleDateString('fa-IR') + '.pdf');
            });
        });

        loadHistory();
    </script>
</body>
</html>